'use strict';!function(a,b){var c=function(){Router.route(),Data.initializeFirebase(),UIElements.cacheElements(),Controls.cacheElements(),Events.bindEvents(),UIElements.showProgressBar(UIElements.$el.linksContainer),UIElements.showProgressBar(UIElements.$el.socialLinksContainer),Data.getVideoSources().then(Actions.methods.parseVideoSources)['catch'](function(a){console.log('Error getting video source array: ',a)}).then(function(a){Collections.paths.video_sources=a,Actions.methods.switchBackgroundVideo(Collections.paths.video_sources,UIElements.$el.background.video_element,UIElements.$el.background.video_source)}),Actions.methods.displayCopyrightYear(UIElements.$el.footer.copyright),Data.getLinks().then(Actions.methods.parseLinks)['catch'](function(a){console.log('Error getting links array: ',a)}).then(function(a){Collections.links.project_links=a.filter(function(a){return'project'===a.type}),Collections.links.social_links=a.filter(function(a){return'social'===a.type}),UIElements.displayLinks(Collections.links.project_links,UIElements.$el.linksContainer),UIElements.displayLinks(Collections.links.social_links,UIElements.$el.socialLinksContainer,!1,!0)})};$(b).ready(c)}(window,document),function(a,b){b.methods={switchBackgroundVideo:function(a,b,c){var d=Math.floor(Math.random()*a.length);c.attr('src',a[d].path),b.load()},displayCopyrightYear:function(a){a.html('&copy;'+function(){return new Date}().getFullYear())},parseLinks:function(a){var b=[],c=[];return a.docs.forEach(function(a){b.push(a.data())}),c=b.sort(function(a,b){return a.weight<b.weight?-1:a.weight>b.weight?1:0})},parseVideoSources:function(a){var b=[];return a.docs.forEach(function(a){b.push(a.data())}),b}}}(window,window.Actions=window.Actions||{}),function(a,b){b.trackOutboundLink=function(a){gtag('event','click',{event_category:'outbound',event_label:a,transport_type:'beacon',event_callback:function(){}})}}(window,window.Analytics=window.Analytics||{}),function(a,b,c){c.cacheElements=function(){c.$el={bg_video_switch:$('[data-ctl=bgvideoswitch]')}}}(window,document,window.Controls=window.Controls||{}),function(a,b,c){c.Model=function(){var a={},b=function(a,b,c){var d=new Promise(function(d,e){var f=new XMLHttpRequest,g=b,h=0,i=void 0;if(c&&('POST'===a||'PUT'===a)){g+='?';for(i in c)c.hasOwnProperty(i)&&(h++&&(g+='&'),g+=encodeURIComponent(i)+'='+encodeURIComponent(c[i]))}f.open(a,g),f.send(),f.onload=function(){f.status>=200&&f.status<300?d(f.response):e(f.statusText)},f.onerror=function(){e(f.statusText)}});return d};return a.httpRequest=function(a){return{get:function(c){return b('GET',a,c)},post:function(c){return b('POST',a,c)},put:function(c){return b('PUT',a,c)},'delete':function(c){return b('DELETE',a,c)}}},a}}(window,document,window.Core=window.Core||{}),function(a,b,c){c.initializeFirebase=function(){var a={apiKey:'AIzaSyBErwJPIqN7K-gfcUMisC594dZEHcjnzkY',authDomain:'kratner-firebase.firebaseapp.com',databaseURL:'https://kratner-firebase.firebaseio.com',projectId:'kratner-firebase',storageBucket:'',messagingSenderId:'386299743486'};firebase.initializeApp(a),c.database=firebase.database();var b=firebase.firestore(),d={timestampsInSnapshots:!0};b.settings(d),c.firestore=b,c.getCollection=function(a){return c.firestore.collection(a).get()}},c.getLinks=function(){return c.getCollection('links')},c.getVideoSources=function(){return c.getCollection('video_sources')}}(window,document,window.Data=window.Data||{}),function(a,b){b.bindEvents=function(){UIElements.$el.link.on('click',function(a){Analytics.trackOutboundLink(a.target.href)}),Controls.$el.bg_video_switch.on('click',function(a){Actions.methods.switchBackgroundVideo(Collections.paths.video_sources,UIElements.$el.background.video_element,UIElements.$el.background.video_source)})}}(window,window.Events=window.Events||{}),function(a,b){b.paths={video_sources:[]},b.links={project_links:[],social_links:[]}}(window,window.Collections=window.Collections||{}),function(a,b,c){c.route=function(){var a=b.referrer,c=function(a){try{new URL(a);return!0}catch(b){return!1}},d=c(a)?new URL(a):new URL(b.location);console.log(d)}}(window,document,window.Router=window.Router||{}),function(a,b){b.cacheElements=function(){b.$el={background:{video_element:$('#video-background'),video_source:$('#video-background > source')},footer:{copyright:$('.copyright')},link:$('.gtag'),linksContainer:$('#links-container'),socialLinksContainer:$('#social-links-container')}},b.showProgressBar=function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];b&&a.html('').append('<div class="mdprogressbar">\n                <div class="line"></div>\n                <div class="subline inc"></div>\n                <div class="subline dec"></div>\n                </div>')},b.displayLinks=function(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=void 0;c?(b.html('').append('<div class="link-padding"></div>'),e=c?b.find('.link-padding'):b,d&&(e.append('<p>'),e=e.find('p'))):(e=b,d&&(e.html('').append('<p>'),e=e.find('p'))),a.forEach(function(a){var b='undefined'==typeof a.icon?'':'<span class="icon-'+a.icon+'"></span>',c='undefined'==typeof a.text?'':a.text,f='<a href="'+a.href+'" class="'+a['class']+'" title="'+a.title+'" target="'+a.target+'">'+c+' '+b+'</a>',g=d?f:'<p>'+f+'</p>';e.append(g)})}}(window,window.UIElements=window.UIElements||{});