'use strict';!function(a,b){var c=function(){Router.route(),Data.initializeFirebase(),UIElements.cacheElements(),Controls.cacheElements(),Events.bindEvents(),UIElements.showSpinner(UIElements.$el.linksContainer),Data.getVideoSources().then(Actions.methods.parseVideoSources)['catch'](function(a){console.log('Error getting video source array: ',a)}).then(function(a){Collections.paths.video_sources=a}),Actions.methods.displayCopyrightYear(UIElements.$el.footer.copyright),Data.getLinks().then(Actions.methods.parseLinks)['catch'](function(a){console.log('Error getting links array: ',a)}).then(function(a){Collections.links.project_links=a.filter(function(a){return'project'===a.type}),Collections.links.social_links=a.filter(function(a){return'social'===a.type}),UIElements.displayLinks(Collections.links.project_links,UIElements.$el.linksContainer),UIElements.displayLinks(Collections.links.social_links,UIElements.$el.socialLinksContainer,!1,!0),UIElements.cacheElements(),Events.bindEvents()})};$(b).ready(c)}(window,document),function(a,b){b.methods={switchBackgroundVideo:function(a,b,c){var d=Math.floor(Math.random()*a.length);c.attr('src',a[d].path),b.load()},displayCopyrightYear:function(a){a.html('&copy;'+function(){return new Date}().getFullYear())},parseLinks:function(a){var b=[],c=[];return a.docs.forEach(function(a){b.push(a.data())}),c=b.sort(function(a,b){return a.weight<b.weight?-1:a.weight>b.weight?1:0})},parseVideoSources:function(a){var b=[];return a.docs.forEach(function(a){b.push(a.data())}),b}}}(window,window.Actions=window.Actions||{}),function(a,b){b.trackOutboundLink=function(a){gtag('event','click',{event_category:'outbound',event_label:a,transport_type:'beacon',event_callback:function(){}})}}(window,window.Analytics=window.Analytics||{}),function(a,b,c){c.cacheElements=function(){c.$el={bg_video_switch:$('[data-ctl=bgvideoswitch]'),user_auth:$('[data-ctl=userauth')}}}(window,document,window.Controls=window.Controls||{}),function(a,b,c){c.Model=function(){var a={},b=function(a,b,c){var d=new Promise(function(d,e){var f=new XMLHttpRequest,g=b,h=0,i=void 0;if(c&&('POST'===a||'PUT'===a)){g+='?';for(i in c)c.hasOwnProperty(i)&&(h++&&(g+='&'),g+=encodeURIComponent(i)+'='+encodeURIComponent(c[i]))}f.open(a,g),f.send(),f.onload=function(){f.status>=200&&f.status<300?d(f.response):e(f.statusText)},f.onerror=function(){e(f.statusText)}});return d};return a.httpRequest=function(a){return{get:function(c){return b('GET',a,c)},post:function(c){return b('POST',a,c)},put:function(c){return b('PUT',a,c)},'delete':function(c){return b('DELETE',a,c)}}},a}}(window,document,window.Core=window.Core||{}),function(a,b,c){c.initializeFirebase=function(){var a={apiKey:'AIzaSyBErwJPIqN7K-gfcUMisC594dZEHcjnzkY',authDomain:'kratner-firebase.firebaseapp.com',databaseURL:'https://kratner-firebase.firebaseio.com',projectId:'kratner-firebase',storageBucket:'',messagingSenderId:'386299743486'};firebase.initializeApp(a),c.database=firebase.database();var b=firebase.firestore(),d={timestampsInSnapshots:!0};b.settings(d),c.firestore=b,c.getCollection=function(a){return c.firestore.collection(a).get()}},c.getLinks=function(){return c.getCollection('links')},c.getVideoSources=function(){return c.getCollection('video_sources')}}(window,document,window.Data=window.Data||{}),function(a,b){b.bindEvents=function(){UIElements.$el.link.on('click',function(a){Analytics.trackOutboundLink(a.target.href)}),UIElements.$el.descriptiveLink.on('click',function(a){$(a.target).parent().find('.linkdescription').addClass('reveal')}),UIElements.$el.hideDescription.on('click',function(a){$(a.target).closest('.linkdescription').removeClass('reveal')}),Controls.$el.bg_video_switch.on('click',function(a){Actions.methods.switchBackgroundVideo(Collections.paths.video_sources,UIElements.$el.background.video_element,UIElements.$el.background.video_source)}),Controls.$el.user_auth.on('click',function(a){UIElements.showLoginForm(UIElements.$el.modalUnderlay)}),UIElements.$el.modalUnderlay.on('click',function(a){UIElements.$el.modalUnderlay.removeClass('visible')})}}(window,window.Events=window.Events||{}),function(a,b){b.paths={video_sources:[]},b.links={project_links:[],social_links:[]}}(window,window.Collections=window.Collections||{}),function(a,b,c){c.route=function(){var a=b.referrer,c=function(a){try{new URL(a);return!0}catch(b){return!1}},d=c(a)?new URL(a):new URL(b.location);switch(d.pathname){case'/admin.html':console.log('launch admin login form');break;default:console.log(d.pathname)}}}(window,document,window.Router=window.Router||{}),function(a,b){b._ALinkElement=function(a){var b=''===a.dataDescription?'':'descriptive',c=''===a.href?'':'href="'+a.href+'"';return'<a \n            '+c+'\n            class="'+a.cssClass+' '+b+'"\n            title="'+a.title+'" \n            target="'+a.target+'"\n        >'+a.text+'</a>'},b._IconElement=function(a){return'<span class="icon-'+a+'"></span>'},b._PaddedDiv=function(a){return'<div class="'+a+'"></div>'},b._ProgressBar=function(a){return a?'<div class="mdprogressbar">\n        <div class="line"></div>\n        <div class="subline inc"></div>\n        <div class="subline dec"></div>\n        </div>':''},b._ModalUnderlay=function(){return'<div class="modal-underlay"></div>'}}(window,window.Templates=window.Templates||{}),function(a,b){b.cacheElements=function(){b.$el={body:$('body'),background:{video_element:$('.video-background__video'),video_source:$('.video-background__video > source')},footer:{copyright:$('.copyright')},link:$('.gtag'),linksContainer:$('#links-container'),modalUnderlay:$('.modal-underlay'),socialLinksContainer:$('#social-links-container'),descriptiveLink:$('.descriptive'),linkDescription:$('.linkdescription'),hideDescription:$('.hidedescription'),spinner:$('#spinner')}},b.showProgressBar=function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a.html('').append(Templates._ProgressBar(b))},b.showSpinner=function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=b?Templates._IconElement('spinner9'):'';a.html('<div id="spinner">'+c+'</div>')},b.displayLinks=function(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],!(arguments.length>4&&void 0!==arguments[4])||arguments[4],!(arguments.length>5&&void 0!==arguments[5])||arguments[5]),e=arguments.length>6&&void 0!==arguments[6]?arguments[6]:'linkdescription',f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:'ul',g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:'li',h=void 0;if(b.html(''),c){var i='link-padding';b.append(Templates._PaddedDiv(i)),h=c?b.find('.'+i):b}else h=b;h.append($('<'+f+'>')),h=h.find(f),a.forEach(function(a){var b='undefined'==typeof a.icon?'':Templates._IconElement(a.icon),c='undefined'==typeof a.text?'':a.text,f='undefined'==typeof a.description?'':a.description,i='',j={dataDescription:f,target:a.target,title:a.title,text:c+' '+b},k='',l='',m='',n=Templates._IconElement('cancel-circle'),o='',p='';d?''===f?i=''===a.href?'':''+a.href:(i='',p=''===a.href?'':Templates._ALinkElement({cssClass:a['class'],href:a.href,title:a.title,target:a.target,text:Templates._IconElement('share')})):i=''===a.href?'':''+a.href,j.cssClass=a['class'],j.href=i,k=Templates._ALinkElement(j),o='<span class="ctl hidedescription" title="Close">'+n+'</span>',m=''===f?'':'<p class="'+e+'">'+o+' '+f+' '+p+'</p>',l='<'+g+'>'+k+m+'</'+g+'>',h.append(l)})},b.showLoginForm=function(a){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a.addClass('visible')}}(window,window.UIElements=window.UIElements||{});